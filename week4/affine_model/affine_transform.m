%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function [D1, D2] = affine_transform(r1, r2, p)

    D1 = (1 - p(1)) * r1 - p(2) * r2 - p(5);
    D2 = -p(3) * r1 + (1 - p(4)) * r2 - p(6);

return

end